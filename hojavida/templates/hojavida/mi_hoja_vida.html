{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Hoja de Vida Profesional</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>

<body class="cv-page">

<div class="cv-wrapper">
    <!-- SIDEBAR IZQUIERDO -->
    <aside class="cv-sidebar">
        <div class="sidebar-content">
            <!-- FOTO Y NOMBRE -->
            <div class="sidebar-perfil">
                {% if datos.foto %}
                    {% if datos.foto.url|slice:":4" == "http" %}
                        <img src="{{ datos.foto.url }}" class="sidebar-foto">
                    {% else %}
                        <img src="https://res.cloudinary.com/drexsapbv{{ datos.foto.url }}" class="sidebar-foto">
                    {% endif %}
                {% else %}
                    <div class="sidebar-foto placeholder-foto">
                        Sin foto
                    </div>
                {% endif %}
                <h2 class="sidebar-nombre">{{ datos.nombres }} {{ datos.apellidos }}</h2>
                <p class="sidebar-profesion">{{ datos.descripcionperfil|default:"Profesional" }}</p>
            </div>

            <hr class="sidebar-divider">

            <!-- NAVEGACI√ìN -->
            <nav class="sidebar-nav">
                <a href="#inicio" class="nav-item">üè† Inicio</a>
                {% if datos.mostrar_experiencia %}
                    <a href="#experiencia" class="nav-item">üíº Experiencia</a>
                {% endif %}
                {% if datos.mostrar_cursos %}
                    <a href="#cursos" class="nav-item">üéì Cursos</a>
                {% endif %}
                {% if datos.mostrar_reconocimientos %}
                    <a href="#reconocimientos" class="nav-item">üèÜ Reconocimientos</a>
                {% endif %}
                {% if datos.mostrar_productos_laborales %}
                    <a href="#productos-laborales" class="nav-item">üöÄ Productos Laborales</a>
                {% endif %}
                {% if datos.mostrar_productos_academicos %}
                    <a href="#productos-academicos" class="nav-item">üìö Productos Acad√©micos</a>
                {% endif %}
                {% if datos.mostrar_ventas %}
                    <a href="#garage" class="nav-item">üõçÔ∏è Garage</a>
                {% endif %}
            </nav>

            <hr class="sidebar-divider">

            <!-- BOTONES DE ACCI√ìN -->
            {% if not es_pdf %}
            <div class="sidebar-actions">
                <a href="{% url 'panel_admin' %}" class="btn-sidebar admin-btn">‚öôÔ∏è Configurar Men√∫</a>
                <a href="{% url 'descargar_cv_pdf' %}" class="btn-sidebar pdf-btn" target="_blank">üì• Descargar PDF</a>
            </div>
            {% endif %}
        </div>
    </aside>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="cv-main">
        <div class="cv-container" id="inicio">

<!-- DATOS PERSONALES -->
<section class="section-header" id="inicio">
    <h1>Informaci√≥n Personal</h1>
    <p>Detalle completo del perfil profesional.</p>
</section>

<div class="card perfil" id="datos-personales">
    <div class="perfil-content">
        <div class="perfil-foto-container">
            {% if datos.foto %}
                {% if datos.foto.url|slice:":4" == "http" %}
                    <img src="{{ datos.foto.url }}" class="foto-perfil">
                {% else %}
                    <img src="https://res.cloudinary.com/drexsapbv{{ datos.foto.url }}" class="foto-perfil">
                {% endif %}
            {% else %}
                <div class="foto-perfil" style="background-color: #ddd; display: flex; align-items: center; justify-content: center; color: #999;">
                    Sin foto
                </div>
            {% endif %}
        </div>

        <div class="perfil-info">
            <h2>{{ datos.nombres }} {{ datos.apellidos }}</h2>
            
            {% if datos.descripcionperfil %}
                <p class="perfil-descripcion">{{ datos.descripcionperfil }}</p>
            {% endif %}

            <div class="perfil-grid">
                <div class="perfil-column">
                    <h4>üÜî Identificaci√≥n</h4>
                    {% if datos.numerocedula %}
                        <p><strong>C√©dula:</strong> {{ datos.numerocedula }}</p>
                    {% endif %}
                    {% if datos.nacionalidad %}
                        <p><strong>Nacionalidad:</strong> {{ datos.nacionalidad }}</p>
                    {% endif %}
                    {% if datos.lugarnacimiento %}
                        <p><strong>Lugar Nacimiento:</strong> {{ datos.lugarnacimiento }}</p>
                    {% endif %}
                    {% if datos.fechanacimiento %}
                        <p><strong>Fecha Nacimiento:</strong> {{ datos.fechanacimiento|date:"d \d\e F, Y" }}</p>
                    {% endif %}
                    {% if datos.sexo %}
                        <p><strong>Sexo:</strong> {% if datos.sexo == 'M' %}Mujer{% else %}Hombre{% endif %}</p>
                    {% endif %}
                </div>

                <div class="perfil-column">
                    <h4>üìû Contacto</h4>
                    {% if datos.estadocivil %}
                        <p><strong>Estado Civil:</strong> {{ datos.estadocivil }}</p>
                    {% endif %}
                    {% if datos.licenciaconducir %}
                        <p><strong>Licencia:</strong> {{ datos.licenciaconducir }}</p>
                    {% endif %}
                    <p><strong>Tel√©fonos:</strong> 
                        {% if datos.telefonoconvencional %}{{ datos.telefonoconvencional }}{% else %}-----------{% endif %} / 
                        {% if datos.telefonofijo %}{{ datos.telefonofijo }}{% else %}----------{% endif %}
                    </p>
                    {% if datos.sitioweb %}
                        <p><strong>Web:</strong> <a href="{{ datos.sitioweb }}" target="_blank" class="link-primary">Visitar</a></p>
                    {% endif %}
                </div>
            </div>

            <div class="perfil-grid perfil-direcciones">
                <div class="perfil-column">
                    {% if datos.direcciondomiciliaria %}
                        <h4>üè† Domicilio:</h4>
                        <p>{{ datos.direcciondomiciliaria }}</p>
                    {% endif %}
                </div>
                <div class="perfil-column">
                    {% if datos.direcciontrabajo %}
                        <h4>üè¢ Trabajo:</h4>
                        <p>{{ datos.direcciontrabajo }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- EXPERIENCIA LABORAL -->
{% if experiencias and datos.mostrar_experiencia %}
<section class="section-header" id="experiencia">
    <h1>üíº Experiencia Laboral</h1>
    <p>Experiencia acad√©mica y pr√°ctica adquirida a lo largo de mi proceso de formaci√≥n profesional.</p>
</section>
<div class="card">
    {% for e in experiencias %}
        <div class="item">
            <h3 class="item-title">{{ e.cargo }}</h3>
            <p class="item-subtitle">{{ e.empresa }} | {{ e.fechainicio|date:"b Y"|upper }} - {% if e.fechafin %}{{ e.fechafin|date:"b Y"|upper }}{% else %}Actualidad{% endif %}</p>
            {% if e.descripcion %}
                <p class="item-description">{{ e.descripcion }}</p>
            {% endif %}
        </div>
    {% endfor %}
<section class="section-header" id="cursos">
    <h1>üéì Cursos Realizados</h1>
    <p>Formaci√≥n acad√©mica y certificaciones obtenidas durante mi proceso de aprendizaje.</p>
</section>
<div class="cursos-grid">
    {% for c in cursos %}
        <div class="card-curso">
            <div class="curso-header">
                <h3 class="curso-titulo">{{ c.nombrecurso }}</h3>
                {% if c.fechainicio %}
                    <span class="curso-horas">{{ c.entidadpatrocinadora }}</span>
                {% endif %}
            </div>
            <p class="curso-fecha">
                {% if c.fechainicio %}
                    {{ c.fechainicio|date:"b Y"|upper }}
                    {% if c.fechafin %}- {{ c.fechafin|date:"b Y"|upper }}{% endif %}
                {% endif %}
            </p>
            {% if c.descripcion %}
                <p class="curso-descripcion">{{ c.descripcion }}</p>
            {% endif %}
            <div class="curso-footer">
                {% if c.archivo_certificado %}
                    <button class="btn-view-cert">üëÅÔ∏è Ver Certificado</button>
                    {% if c.archivo_certificado.url|slice:":4" == "http" %}
                        <a href="{{ c.archivo_certificado.url }}" target="_blank" class="btn-download-pdf">‚¨áÔ∏è Descargar PDF</a>
                    {% else %}
                        <a href="https://res.cloudinary.com/drexsapbv{{ c.archivo_certificado.url }}" target="_blank" class="btn-download-pdf">‚¨áÔ∏è Descargar PDF</a>
                    {% endif %}
                {% else %}
                    <span class="sin-certificado">‚ÑπÔ∏è Sin certificado adjunto</span>
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- RECONOCIMIENTOS -->
{% if reconocimientos and datos.mostrar_reconocimientos %}
<section class="section-header" id="reconocimientos">
    <h1>üèÜ Reconocimientos Acad√©micos</h1>
    <p>Menciones y honores obtenidos por excelencia y desempe√±o.</p>
</section>
<div class="reconocimientos-grid">
    {% for r in reconocimientos %}
        <div class="card-reconocimiento">
            <h3 class="reco-titulo">{{ r.tiporeconocimiento }}</h3>
            <p class="reco-entidad">
                {% if r.idperfilconqueestaactivo.nombrecontactoauspicia %}
                    üè¢ {{ r.entidadpatrocinadora }}
                {% else %}
                    üè¢ {{ r.entidadpatrocinadora }}
                {% endif %}
            </p>
            {% if r.fechareconocimiento %}
                <p class="reco-fecha">üìÖ {{ r.fechareconocimiento|date:"Y" }}</p>
            {% endif %}
            {% if r.descripcionreconocimiento %}
                <p class="reco-descripcion">{{ r.descripcionreconocimiento }}</p>
            {% endif %}
            <div class="reco-footer">
                {% if r.archivo_certificado %}
                    <button class="btn-view-cert">üëÅÔ∏è Ver Certificado</button>
                    {% if r.archivo_certificado.url|slice:":4" == "http" %}
                        <a href="{{ r.archivo_certificado.url }}" target="_blank" class="btn-download-pdf">‚¨áÔ∏è Descargar PDF</a>
                    {% else %}
                        <a href="https://res.cloudinary.com/drexsapbv{{ r.archivo_certificado.url }}" target="_blank" class="btn-download-pdf">‚¨áÔ∏è Descargar PDF</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- PRODUCTOS ACAD√âMICOS -->
{% if productos_academicos and datos.mostrar_productos_academicos %}
<section class="section-header" id="productos-academicos">
    <h1>üìö Productos Acad√©micos</h1>
    <p>Trabajos, investigaciones y proyectos acad√©micos realizados.</p>
</section>
<div class="productos-grid">
    {% for p in productos_academicos %}
        <div class="card-producto">
            <h3 class="prod-titulo">{{ p.nombreproducto }}</h3>
            <p class="prod-tipo">{{ p.tiposproducto }}</p>
            {% if p.fechapublicacion %}
                <p class="prod-fecha">üìÖ {{ p.fechapublicacion|date:"b Y"|upper }}</p>
            {% endif %}
            {% if p.descripcion %}
                <p class="prod-descripcion">{{ p.descripcion }}</p>
            {% endif %}
            <div class="prod-footer">
                {% if p.enlace %}
                    <a href="{{ p.enlace }}" target="_blank" class="btn-link">üîó Ver m√°s</a>
                {% endif %}
                {% if p.archivo %}
                    {% if p.archivo.url|slice:":4" == "http" %}
                        <a href="{{ p.archivo.url }}" target="_blank" class="btn-download">üì• Descargar</a>
                    {% else %}
                        <a href="https://res.cloudinary.com/drexsapbv{{ p.archivo.url }}" target="_blank" class="btn-download">üì• Descargar</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- PRODUCTOS LABORALES -->
{% if productos_laborales and datos.mostrar_productos_laborales %}
<section class="section-header" id="productos-laborales">
    <h1>üöÄ Productos Laborales</h1>
    <p>Proyectos y logros profesionales realizados en el campo laboral.</p>
</section>
<div class="productos-grid">
    {% for pl in productos_laborales %}
        <div class="card-producto">
            <h3 class="prod-titulo">{{ pl.nombreproducto }}</h3>
            {% if pl.descripcion %}
                <p class="prod-descripcion">{{ pl.descripcion }}</p>
            {% endif %}
            <div class="prod-footer">
                {% if pl.enlace %}
                    <a href="{{ pl.enlace }}" target="_blank" class="btn-link">üîó Ver m√°s</a>
                {% endif %}
                {% if pl.archivo %}
                    {% if pl.archivo.url|slice:":4" == "http" %}
                        <a href="{{ pl.archivo.url }}" target="_blank" class="btn-download">üì• Descargar</a>
                    {% else %}
                        <a href="https://res.cloudinary.com/drexsapbv{{ pl.archivo.url }}" target="_blank" class="btn-download">üì• Descargar</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>
{% endif %}

<!-- VENTA GARAGE -->
{% if ventas and datos.mostrar_ventas %}
<section class="section-header" id="garage">
    <h1>üõçÔ∏è Venta de Garage</h1>
    <p>Art√≠culos en buen estado. ¬°Echa un vistazo a lo disponible!</p>
</section>
<div class="garage-grid">
    {% for v in ventas %}
        <div class="card-venta">
            {% if v.imagen %}
                {% if v.imagen.url|slice:":4" == "http" %}
                    <img src="{{ v.imagen.url }}" alt="{{ v.nombreproducto }}" class="venta-imagen">
                {% else %}
                    <img src="https://res.cloudinary.com/drexsapbv{{ v.imagen.url }}" alt="{{ v.nombreproducto }}" class="venta-imagen">
                {% endif %}
            {% else %}
                <div class="venta-imagen placeholder-imagen">Sin imagen</div>
            {% endif %}
            <div class="venta-info">
                <h3 class="venta-titulo">{{ v.nombreproducto }}</h3>
                <div class="venta-estado">
                    {% if v.estadoproducto == "Bueno" %}
                        <span class="badge-bueno">{{ v.estadoproducto }}</span>
                    {% elif v.estadoproducto == "Regular" %}
                        <span class="badge-regular">{{ v.estadoproducto }}</span>
                    {% else %}
                        <span class="badge-malo">{{ v.estadoproducto }}</span>
                    {% endif %}
                </div>
                <p class="venta-precio">${{ v.valordelbien|floatformat:2 }}</p>
                {% if v.descripcion %}
                    <p class="venta-descripcion">{{ v.descripcion }}</p>
                {% endif %}
                {% if v.fechapublicacion %}
                    <p class="venta-fecha">Publicado el {{ v.fechapublicacion|date:"d \d\e F, Y" }}</p>
                {% endif %}
                {% if v.archivo %}
                    {% if v.archivo.url|slice:":4" == "http" %}
                        <a href="{{ v.archivo.url }}" target="_blank" class="btn-archivo">üìÑ Ver documento</a>
                    {% else %}
                        <a href="https://res.cloudinary.com/drexsapbv{{ v.archivo.url }}" target="_blank" class="btn-archivo">üìÑ Ver documento</a>
                    {% endif %}
                {% endif %}
            </div>
        </div>
    {% endfor %}
</div>
{% endif %}

        </div>
    </main>
</div>

</body>
</html>
