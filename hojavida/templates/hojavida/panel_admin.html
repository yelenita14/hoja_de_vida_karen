<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Administrativo | CV</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>

<body class="cv-page">

<div class="admin-wrapper">
    <!-- SIDEBAR -->
    <aside class="admin-sidebar">
        <div class="sidebar-content">
            <div class="sidebar-perfil">
                <h2 class="sidebar-nombre">Panel de administraci√≥n</h2>
                <p class="sidebar-profesion">{{ user.username }}</p>
            </div>

            <nav class="sidebar-nav">
                <a href="{% url 'panel_admin' %}?seccion=datos" class="nav-item {% if request.GET.seccion == 'datos' or not request.GET.seccion %}active{% endif %}">
                    <span>üë§</span>
                    <span>Datos Personales</span>
                </a>
                <a href="{% url 'panel_admin' %}?seccion=experiencia" class="nav-item {% if request.GET.seccion == 'experiencia' %}active{% endif %}">
                    <span>üíº</span>
                    <span>Experiencia Laboral</span>
                </a>
                <a href="{% url 'panel_admin' %}?seccion=cursos" class="nav-item {% if request.GET.seccion == 'cursos' %}active{% endif %}">
                    <span>üéì</span>
                    <span>Cursos Realizados</span>
                </a>
                <a href="{% url 'panel_admin' %}?seccion=reconocimientos" class="nav-item {% if request.GET.seccion == 'reconocimientos' %}active{% endif %}">
                    <span>üèÜ</span>
                    <span>Reconocimientos</span>
                </a>
                <a href="{% url 'panel_admin' %}?seccion=academicos" class="nav-item {% if request.GET.seccion == 'academicos' %}active{% endif %}">
                    <span>üìö</span>
                    <span>Productos Acad√©micos</span>
                </a>
                <a href="{% url 'panel_admin' %}?seccion=laborales" class="nav-item {% if request.GET.seccion == 'laborales' %}active{% endif %}">
                    <span>üíª</span>
                    <span>Productos Laborales</span>
                </a>
                <a href="{% url 'panel_admin' %}?seccion=ventas" class="nav-item {% if request.GET.seccion == 'ventas' %}active{% endif %}">
                    <span>üõí</span>
                    <span>Venta Garage</span>
                </a>
            </nav>

            <div class="sidebar-actions">
                <a href="{% url 'mi_hoja_vida' %}" class="btn-sidebar admin-btn">
                    Ver CV P√∫blico
                </a>
                <a href="{% url 'logout' %}" class="btn-sidebar logout-btn">
                    Cerrar Sesi√≥n
                </a>
            </div>
        </div>
    </aside>

    <!-- CONTENIDO -->
    <main class="cv-main">
        <div class="cv-container">
            
            {% if not request.GET.seccion or request.GET.seccion == 'datos' %}
            <!-- DATOS PERSONALES -->
            <section class="admin-section">
                <div class="section-header-admin">
                    <h2>üë§ Datos Personales</h2>
                    <p>Gestiona tu informaci√≥n personal y de contacto</p>
                </div>
                
                <div class="admin-card">
                    {% if perfil %}
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                        <div style="background: var(--fondo-input); padding: 1.2rem; border-radius: 8px; border: 1px solid rgba(79, 209, 197, 0.2);">
                            <div style="color: var(--texto-gris-medio); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem;">NOMBRE COMPLETO</div>
                            <div style="color: var(--texto-blanco); font-size: 1.1rem; font-weight: 600;">{{ perfil.nombres }} {{ perfil.apellidos }}</div>
                        </div>
                        
                        {% if perfil.numerocedula %}
                        <div style="background: var(--fondo-input); padding: 1.2rem; border-radius: 8px; border: 1px solid rgba(79, 209, 197, 0.2);">
                            <div style="color: var(--texto-gris-medio); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem;">C√âDULA</div>
                            <div style="color: var(--texto-blanco); font-size: 1.1rem; font-weight: 600;">{{ perfil.numerocedula }}</div>
                        </div>
                        {% endif %}
                        
                        {% if perfil.nacionalidad %}
                        <div style="background: var(--fondo-input); padding: 1.2rem; border-radius: 8px; border: 1px solid rgba(79, 209, 197, 0.2);">
                            <div style="color: var(--texto-gris-medio); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem;">NACIONALIDAD</div>
                            <div style="color: var(--texto-blanco); font-size: 1.1rem; font-weight: 600;">{{ perfil.nacionalidad }}</div>
                        </div>
                        {% endif %}
                        
                        {% if perfil.direcciondomiciliaria %}
                        <div style="background: var(--fondo-input); padding: 1.2rem; border-radius: 8px; border: 1px solid rgba(79, 209, 197, 0.2);">
                            <div style="color: var(--texto-gris-medio); font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.5rem;">UBICACI√ìN</div>
                            <div style="color: var(--texto-blanco); font-size: 1.1rem; font-weight: 600;">{{ perfil.direcciondomiciliaria }}</div>
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    <div class="btn-group">
                        {% if not perfil %}
                        <a href="{% url 'agregar_datos' %}" class="btn-add">‚ûï Agregar Datos</a>
                        {% else %}
                        <a href="{% url 'editar_datos' %}" class="btn-edit">‚úèÔ∏è Editar Datos</a>
                        {% endif %}
                    </div>
                </div>
            </section>
            {% endif %}

            {% if request.GET.seccion == 'experiencia' %}
            <!-- EXPERIENCIA LABORAL -->
            <section class="admin-section">
                <div class="section-header-admin">
                    <h2>üíº Experiencia Laboral</h2>
                    <p>Gestiona tu trayectoria profesional</p>
                </div>
                
                <div class="admin-card">
                    <div class="btn-group">
                        <a href="{% url 'agregar_experiencia' %}" class="btn-add">‚ûï Agregar Experiencia</a>
                    </div>
                    
                    {% if experiencias %}
                    <div class="items-list">
                        {% for exp in experiencias %}
                        <div class="item-row">
                            <div class="item-info">
                                <h4>{{ exp.cargodesempenado }}</h4>
                                <p>{{ exp.nombrempresa }} ‚Ä¢ {{ exp.fechainiciogestion|date:"m/Y" }} - {% if exp.fechafingestion %}{{ exp.fechafingestion|date:"m/Y" }}{% else %}Actual{% endif %}</p>
                            </div>
                            <a href="{% url 'editar_experiencia_laboral' exp.idexperiencialaboral %}" class="btn-item-edit">‚úèÔ∏è Editar</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="empty-message">No hay experiencias registradas</p>
                    {% endif %}
                </div>
            </section>
            {% endif %}

            {% if request.GET.seccion == 'cursos' %}
            <!-- CURSOS -->
            <section class="admin-section">
                <div class="section-header-admin">
                    <h2>üéì Cursos Realizados</h2>
                    <p>Gestiona tus capacitaciones y certificaciones</p>
                </div>
                
                <div class="admin-card">
                    <div class="btn-group">
                        <a href="{% url 'agregar_curso' %}" class="btn-add">‚ûï Agregar Curso</a>
                    </div>
                    
                    {% if cursos %}
                    <div class="items-list">
                        {% for curso in cursos %}
                        <div class="item-row">
                            <div class="item-info">
                                <h4>{{ curso.nombrecurso }}</h4>
                                <p>{{ curso.entidadpatrocinadora }}{% if curso.fechainicio %} ‚Ä¢ {{ curso.fechainicio|date:"Y" }}{% endif %}</p>
                            </div>
                            <a href="{% url 'editar_curso' curso.idcursorealizado %}" class="btn-item-edit">‚úèÔ∏è Editar</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="empty-message">No hay cursos registrados</p>
                    {% endif %}
                </div>
            </section>
            {% endif %}

            {% if request.GET.seccion == 'reconocimientos' %}
            <!-- RECONOCIMIENTOS -->
            <section class="admin-section">
                <div class="section-header-admin">
                    <h2>üèÜ Reconocimientos</h2>
                    <p>Gestiona tus premios y distinciones</p>
                </div>
                
                <div class="admin-card">
                    <div class="btn-group">
                        <a href="{% url 'agregar_reconocimiento' %}" class="btn-add">‚ûï Agregar Reconocimiento</a>
                    </div>
                    
                    {% if reconocimientos %}
                    <div class="items-list">
                        {% for rec in reconocimientos %}
                        <div class="item-row">
                            <div class="item-info">
                                <h4>{{ rec.tiporeconocimiento }}</h4>
                                <p>{{ rec.entidadpatrocinadora }}{% if rec.fechareconocimiento %} ‚Ä¢ {{ rec.fechareconocimiento|date:"Y" }}{% endif %}</p>
                            </div>
                            <a href="{% url 'editar_reconocimiento' rec.idreconocimiento %}" class="btn-item-edit">‚úèÔ∏è Editar</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="empty-message">No hay reconocimientos registrados</p>
                    {% endif %}
                </div>
            </section>
            {% endif %}

            {% if request.GET.seccion == 'academicos' %}
            <!-- PRODUCTOS ACAD√âMICOS -->
            <section class="admin-section">
                <div class="section-header-admin">
                    <h2>üìö Productos Acad√©micos</h2>
                    <p>Gestiona tus publicaciones y trabajos acad√©micos</p>
                </div>
                
                <div class="admin-card">
                    <div class="btn-group">
                        <a href="{% url 'agregar_producto_academico' %}" class="btn-add">‚ûï Agregar Producto</a>
                    </div>
                    
                    {% if productos_academicos %}
                    <div class="items-list">
                        {% for prod in productos_academicos %}
                        <div class="item-row">
                            <div class="item-info">
                                <h4>{{ prod.nombrerecurso }}</h4>
                                <p>{{ prod.clasificador }}{% if prod.fecha_registro %} ‚Ä¢ {{ prod.fecha_registro|date:"Y" }}{% endif %}</p>
                            </div>
                            <a href="{% url 'editar_producto_academico' prod.idproductoacademico %}" class="btn-item-edit">‚úèÔ∏è Editar</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="empty-message">No hay productos acad√©micos registrados</p>
                    {% endif %}
                </div>
            </section>
            {% endif %}

            {% if request.GET.seccion == 'laborales' %}
            <!-- PRODUCTOS LABORALES -->
            <section class="admin-section">
                <div class="section-header-admin">
                    <h2>üíª Productos Laborales</h2>
                    <p>Gestiona tus proyectos y trabajos profesionales</p>
                </div>
                
                <div class="admin-card">
                    <div class="btn-group">
                        <a href="{% url 'agregar_producto_laboral' %}" class="btn-add">‚ûï Agregar Producto</a>
                    </div>
                    
                    {% if productos_laborales %}
                    <div class="items-list">
                        {% for prod in productos_laborales %}
                        <div class="item-row">
                            <div class="item-info">
                                <h4>{{ prod.nombreproducto }}</h4>
                                <p>{% if prod.fechaproducto %}{{ prod.fechaproducto|date:"Y" }}{% else %}Producto laboral{% endif %}</p>
                            </div>
                            <a href="{% url 'editar_producto_laboral' prod.idproductoslaborales %}" class="btn-item-edit">‚úèÔ∏è Editar</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="empty-message">No hay productos laborales registrados</p>
                    {% endif %}
                </div>
            </section>
            {% endif %}

            {% if request.GET.seccion == 'ventas' %}
            <!-- VENTA GARAGE -->
            <section class="admin-section">
                <div class="section-header-admin">
                    <h2>üõí Venta Garage</h2>
                    <p>Gestiona tus productos en venta</p>
                </div>
                
                <div class="admin-card">
                    <div class="btn-group">
                        <a href="{% url 'agregar_venta' %}" class="btn-add">‚ûï Agregar Producto</a>
                    </div>
                    
                    {% if ventas %}
                    <div class="items-list">
                        {% for venta in ventas %}
                        <div class="item-row">
                            <div class="item-info">
                                <h4>{{ venta.nombreproducto }}</h4>
                                <p>${{ venta.valordelbien|floatformat:2 }} ‚Ä¢ {{ venta.estadoproducto }}</p>
                            </div>
                            <a href="{% url 'editar_venta' venta.idventagarage %}" class="btn-item-edit">‚úèÔ∏è Editar</a>
                        </div>
                        {% endfor %}
                    </div>
                    {% else %}
                    <p class="empty-message">No hay productos en venta registrados</p>
                    {% endif %}
                </div>
            </section>
            {% endif %}

        </div>
    </main>
</div>

</body>
</html>